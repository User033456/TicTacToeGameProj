<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns:local="clr-namespace:TicTacToeGameProj"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
     xmlns:effects="clr-namespace:Microsoft.Maui.Controls;assembly=Microsoft.Maui.Controls"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="TicTacToeGameProj.MainPage"
             NavigationPage.HasNavigationBar="False"
             Shell.NavBarIsVisible="false"
             >
    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#B3EBED" Offset="0"/>
            <GradientStop Color="#020136" Offset="1"/>
        </LinearGradientBrush>
    </ContentPage.Background>
    <Grid x:Name="MainGrid" RowDefinitions="0.1*, 0.1*, 0.4*, *"
          ColumnDefinitions="*, *"
          RowSpacing="15"
          ColumnSpacing="15"
          Padding="20">
        <!-- 1. Верхняя панель управления -->
        <HorizontalStackLayout Grid.Column="0" >

            <Button x:Name="HomeButton" 
                    Text="Home"
                    CornerRadius="25"
                    BackgroundColor="#D9D9D9"
                    TextColor="#020136"
                    HorizontalOptions="Start"
                    MinimumWidthRequest="120"
                    >
            </Button>
        </HorizontalStackLayout>
        <HorizontalStackLayout HorizontalOptions="End" Grid.Column="1">
            <ImageButton x:Name="SettingsButton"
            Source="settings.svg"
            CornerRadius="25"
                         
            Background="Transparent"
            HorizontalOptions="End"
            Aspect="AspectFit"
            HeightRequest="50"/>
        </HorizontalStackLayout>
        <!-- 2. Кнопка новой игры -->
        <Button x:Name="NewGameButton"
                Opacity="0.75"
                Grid.Row="1"
                Grid.ColumnSpan="2"
                Text="New Game"
                CornerRadius="25"
                BackgroundColor="#D9D9D9"
                TextColor="#020136"
                HeightRequest="50"/>
        <!-- 3. Блок счета и таймера -->
        <Grid Grid.Row="2"
              Grid.ColumnSpan="2"
              ColumnDefinitions="Auto, Auto"
              ColumnSpacing="15">
            <!-- Табло счета -->
            <Frame CornerRadius="25"
       BackgroundColor="Transparent" 
                Padding="0"
       HorizontalOptions="Fill">
                <Grid  RowDefinitions="0.5*, *">
                    <Frame
                        HorizontalOptions="FillAndExpand"
                        VerticalOptions="FillAndExpand"
                        CornerRadius="0"  Grid.Row="0"
                        BackgroundColor="#D9D9D9" 
                        Opacity="0.6" 
                         Padding="10">
                        <Label Text="Score"
                            FontSize="18"
                            FontAttributes="Bold"
                            HorizontalOptions="Center"/>
                    </Frame>


                    <Frame CornerRadius="0" Grid.Row="1"              
                           HorizontalOptions="FillAndExpand"
                           VerticalOptions="FillAndExpand"
                           BackgroundColor="#D9D9D9"
                           Opacity="0.75" 
                           Padding="10">
                        <Grid ColumnDefinitions="*, *, Auto"
   RowDefinitions="Auto, Auto"
   ColumnSpacing="15"
   RowSpacing="10"
   HorizontalOptions="Center">

                            <!-- Крестик -->
                            <ContentView Grid.Row="0" Grid.Column="0"
              WidthRequest="30" HeightRequest="26"
              HorizontalOptions="Center">
                                <Line X1="25" Y1="0" X2="0" Y2="25"
           Stroke="Red" StrokeThickness="4"/>
                            </ContentView>
                            <ContentView Grid.Row="0" Grid.Column="0"
              WidthRequest="26" HeightRequest="26"
              HorizontalOptions="Center">
                                <Line X1="0" Y1="0" X2="25" Y2="25"
           Stroke="Red" StrokeThickness="4"/>
                            </ContentView>

                            <!-- Нолик -->
                            <Ellipse Grid.Row="0" Grid.Column="1"
          WidthRequest="26" HeightRequest="26"
          Stroke="Green" StrokeThickness="4"/>

                            <!-- Кнопка сброса -->
                            <Button x:Name="ResetScoreButton"
         Grid.Row="0" Grid.Column="2"
         Text="Reset"
         CornerRadius="20"
         BackgroundColor="#FF0000"
         TextColor="White"
         WidthRequest="90"
         HeightRequest="25"/>

                            <!-- Счет -->
                            <Label x:Name="XScoreLabel" 
        Text="0" 
                    HorizontalOptions="Center"
        Grid.Row="1" 
        Grid.Column="0"
        FontSize="16"/>

                            <Label x:Name="OScoreLabel"
        Text="0" 
                    HorizontalOptions="Center"
        Grid.Row="1" 
        Grid.Column="1"
        FontSize="16"/>
                        </Grid>
                    </Frame>
                </Grid>
            </Frame>
            <!-- Таймер -->
            <Frame x:Name="TimerFrame"
                   Grid.Column="1"
                   
           VerticalOptions="FillAndExpand"
                   CornerRadius="25"
                   BackgroundColor="Transparent"
                   Padding="0"
                   HorizontalOptions="Fill">
                <Grid  RowDefinitions="0.5*, *">
                    <Frame
                        HorizontalOptions="FillAndExpand"
                        VerticalOptions="FillAndExpand"
                        CornerRadius="0"  Grid.Row="0"
                        BackgroundColor="#D9D9D9" 
                        Opacity="0.6" 
                         Padding="10">
                        <Label Text="Time"
                        FontSize="18"
                        FontAttributes="Bold"
                        HorizontalOptions="Center"/>
                    </Frame>
                    <Frame Grid.Row="1" CornerRadius="0"  Opacity="0.75" BackgroundColor="#D9D9D9"
                                        HorizontalOptions="FillAndExpand"
                                VerticalOptions="FillAndExpand">
                        <Label x:Name="TimerLabel"
                        Text="00:00"
                        FontSize="16"
                        HorizontalOptions="Center"/>
                    </Frame>
                </Grid>
            </Frame>
        </Grid>
        <Frame Grid.Row="3" x:Name="GameFrame" BackgroundColor="Transparent"
               BorderColor="#D9D9D9"
        Grid.ColumnSpan="2"
        CornerRadius="20"
        Padding="0"
        HasShadow="True">
            <!-- 4. Многослойное игровое поле -->
            <Grid x:Name="GameBoard"
              VerticalOptions="FillAndExpand"
              >
                <!-- Слой 1: Фон -->
                <Grid x:Name="BackgroundGrid"
                  RowDefinitions="*, *, *"
                  ColumnDefinitions="*, *, *"
                       Opacity="0.5"
                  BackgroundColor="#D9D9D9">
                    <!-- Горизонтальные линии -->
                    <BoxView Color="Black"
                         HeightRequest="2"
                         Grid.Row="0"
                         Grid.ColumnSpan="3"
                         VerticalOptions= "End"/>
                    <BoxView Color="Black"
                         HeightRequest="2"
                         Grid.Row="1"
                         Grid.ColumnSpan="3"
                         VerticalOptions="End"/>

                    <!-- Вертикальные линии -->
                    <BoxView Color="Black"
                         WidthRequest="2"
                         Grid.Column="0"
                         Grid.RowSpan="3"
                         HorizontalOptions="End"/>
                    <BoxView Color="Black"
                         WidthRequest="2"
                         Grid.Column="1"
                         Grid.RowSpan="3"
                         HorizontalOptions="End"/>
                </Grid>
                <!-- Слой 2: Нолики -->
                <Grid x:Name="CirclesLayer"
                  IsVisible="True"
                  BackgroundColor="Transparent">
                </Grid>
                <!-- Слой 3: Крестики -->
                <Grid x:Name="CrossesLayer"
                  IsVisible="True"
                  BackgroundColor="Transparent">
                </Grid>
                <!-- Слой 4: Пустой слой (резерв) -->
                <Grid x:Name="EmptyLayer"
                  RowDefinitions="*, *, *"
                  ColumnDefinitions="*, *, *"
                  BackgroundColor="Transparent"/>
                <!-- Слой 5: Кнопки -->
                <Grid x:Name="ButtonsLayer"
                  BackgroundColor="Transparent">
                </Grid>
            </Grid>
        </Frame>
    </Grid>
</ContentPage>